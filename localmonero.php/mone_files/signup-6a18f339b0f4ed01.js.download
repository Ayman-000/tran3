(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[777616],{798588:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/signup",function(){return s(806539)}])},139621:function(e,t,s){"use strict";var a=s(785893),r=s(667294),i=s(809530),n=s(845348),o=s(78252),l=s(38799),h=s(779180),p=s(438837);let d=(0,o.default)(e=>({root:{color:"#fff"},underline:{borderBottomColor:"#fff","&:before":{borderBottomColor:"#fff"},"&:after":{borderBottomColor:"#fff"},"&:hover:not(.Mui-disabled):before":{borderBottomColor:"#fff"}}}))(l.Z);t.Z=(0,h.XN)(e=>{let{isRegistration:t,sendToParent:s,redeem:o,xs:h}=e,c=t?l.Z:d,[u,g]=(0,r.useState)(""),m="^[A-Z0-9]{1,64}$";return(0,a.jsx)(c,{value:u,style:t?{marginTop:-16,marginBottom:16}:{},fullWidth:t,onKeyDown:e=>t?null:(0,i.VA)(e,o,!(0,i.Gu)(u,m)),onChange:e=>{g(e.target.value.toUpperCase()),s(e.target.value.toUpperCase(),u&&!(0,i.Gu)(u,m))},error:u&&!(0,i.Gu)(u,m),inputProps:{name:"couponCode",className:"disable-surface",required:!t,max:64,min:1,pattern:m},startAdornment:!h&&!t&&(0,a.jsxs)(n.ZP,{style:{marginRight:8,opacity:.6},viewBox:"0 0 512 512",children:[(0,a.jsx)("path",{d:"M322.435 276.203c-5.698 0-11.396 5.18-11.396 22.534 0 17.353 5.698 22.534 11.396 22.534s11.396-5.18 11.396-22.534-5.698-22.534-11.396-22.534zM189.565 190.731c-5.698 0-11.396 5.18-11.396 22.533 0 17.354 5.698 22.534 11.396 22.534s11.396-5.18 11.396-22.534c0-17.353-5.698-22.533-11.396-22.533z"}),(0,a.jsx)("path",{d:"M512 241v-89.667h-15c-18.748 0-34-15.252-34-34v-15H49v15c0 18.748-15.252 34-34 34H0V241h42.667v30H0v89.667h15c18.748 0 34 15.252 34 34v15h414v-15c0-18.748 15.252-34 34-34h15V271h-42.667v-30H512zm-370.61-27.736c0-32.117 20.72-50.506 48.175-50.506s48.175 18.39 48.175 50.506c0 32.376-20.721 50.506-48.175 50.506-27.455 0-48.175-18.13-48.175-50.506zm30.821 133.388l123.805-181.304h43.772L215.983 346.652h-43.772zm150.224 2.59c-27.455 0-48.175-18.13-48.175-50.506 0-32.117 20.72-50.506 48.175-50.506s48.175 18.389 48.175 50.506c0 32.376-20.72 50.506-48.175 50.506z"})]}),placeholder:(0,p.L)(e.intl,"","coupons.code-input.placeholder"),color:t?"primary":"secondary"})})},345774:function(e,t,s){"use strict";var a=s(785893);s(667294);var r=s(809008),i=s.n(r);t.Z=e=>(0,a.jsxs)(i(),{children:[e.canonical&&(0,a.jsx)("link",{rel:"canonical",href:e.canonical}),["description","twitter:description"].map(t=>(0,a.jsx)("meta",{name:t,content:e.description},t)),(0,a.jsx)("meta",{itemProp:"description",content:e.description}),(0,a.jsx)("meta",{property:"og:description",content:e.description}),e.schema&&(0,a.jsx)(a.Fragment,{children:Object.keys(e.schema).map(t=>(0,a.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:JSON.stringify(e.schema[t])}},t))}),e.datePublished&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("meta",{property:"article:publisher",content:e.frontType}),(0,a.jsx)("meta",{property:"article:section",content:"Uncategorized"}),(0,a.jsx)("meta",{property:"article:published_time",content:e.datePublished}),e.dateUpdated&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("meta",{property:"article:modified_time",content:e.dateUpdated}),(0,a.jsx)("meta",{property:"og:updated_time",content:e.dateUpdated})]})]})]})},33916:function(e,t,s){"use strict";var a,r=s(108679),i=s.n(r),n=s(779180);t.Z=(a=n.XN,e=>{let t=a(e);return i()(t,e),t})},463911:function(e,t,s){"use strict";var a=s(785893),r=s(667294),i=s(541749),n=s(439803),o=s(517586),l=s(817812),h=s(936210),p=s(779180),d=s(582313);class c extends r.Component{UNSAFE_componentWillReceiveProps(e){e.reset&&(this.setState({refreshCaptchaKey:this.state.refreshCaptchaKey+1,captcha:""},()=>this.setState({refreshInputKey:this.state.refreshInputKey+1})),this.props.onReset())}render(){return(0,a.jsxs)(i.Z,{style:{marginTop:16,maxWidth:"100%",gap:8,display:"flex",flexDirection:"column"},item:!0,xs:12,children:[(0,a.jsxs)(i.Z,{style:{display:"flex",justifyContent:"center",alignItems:"center",gap:4},item:!0,xs:12,children:[(0,a.jsx)("div",{children:(0,a.jsx)("img",{style:{maxWidth:"100%"},alt:"captcha",src:"/captcha.jpg?r=".concat(this.state.refreshCaptchaKey)})}),(0,a.jsx)(l.Z,{size:"small","aria-label":"refresh-captcha",onClick:()=>this.setState({refreshCaptchaKey:this.state.refreshCaptchaKey+1,captcha:""}),children:(0,a.jsx)(h.Z,{style:{color:(0,o.Z)(this.props.theme.palette).button.icon}})})]}),(0,a.jsx)(i.Z,{item:!0,xs:12,style:{marginTop:4},children:(0,a.jsx)(n.Z,{InputLabelProps:{shrink:this.props.raisedLabel},inputProps:{"aria-label":"Captcha"},variant:"outlined",id:"captcha",name:"captcha",fullWidth:!0,onKeyDown:e=>{13===e.keyCode&&(this.props.disableBtn||!this.props.handleSubmit||this.props.handleSubmit())},type:"text",label:(0,a.jsx)(p._H,{id:"captcha.helper-text",defaultMessage:"Enter the text on the image above"}),value:this.state.captcha,onChange:this.handleCaptchaInput},this.state.refreshInputKey)})]})}constructor(e,t){super(e,t),this.handleCaptchaInput=e=>{this.setState({captcha:e.target.value}),this.props.sendToParent(e.target.value)},this.state={captcha:"",refreshCaptchaKey:this.props.preventCacheKey,refreshInputKey:0}}}t.Z=(0,d.Z)(c)},249638:function(e,t,s){"use strict";var a=s(785893),r=s(895477);s(667294),t.Z=e=>{var t;let{marginTop:s,marginBottom:i,color:n,size:o,margin:l,marginLeft:h,verticalAlign:p,thickness:d,action:c=!0,...u}=e,g={loadingChunk:{width:24,height:24,margin:"auto",display:"block",marginTop:null!=s?s:24,marginBottom:null!=i?i:24},action:{color:null!=n?n:"inherit",width:null!=o?o:16,height:null!=o?o:16,margin:null!=l?l:4,display:"inline-block",marginLeft:null!==(t=null!=h?h:l)&&void 0!==t?t:4,verticalAlign:null!=p?p:"middle"}};return(0,a.jsx)(r.Z,{thickness:null!=d?d:3.6,suppressHydrationWarning:!0,style:c?g.action:g.loadingChunk,...u})}},944287:function(e,t,s){"use strict";s(667294);var a=s(78252),r=s(109570);t.Z=(0,a.default)(e=>({switchBase:{"&$checked":{color:e.palette.misc.toggle},"&$checked + $track":{backgroundColor:e.palette.misc.toggle},"&$disabled + $track":{backgroundColor:"#bdbdbd"},"&$disabled":{color:"#bdbdbd"}},disabled:{backgroundColor:e.palette.misc.tabs.inactive,color:e.palette.misc.tabs.inactive},checked:{},track:{}}))(r.Z)},634538:function(e,t,s){"use strict";var a=s(785893),r=s(659061),i=s(913457);s(667294),t.Z=e=>{let{type:t="light",active:s,children:n,frontType:o}=e;if(!s||"light"===t)return n;let l=(0,r.Z)({palette:{type:t,background:{paper:"AgoraDesk"===o?"#2e343e":"#2e333f"},primary:{main:"#8093fb"},misc:{toggle:"#00b248",tabs:{inactive:"#616161"}},button:{icon:"rgba(255, 255, 255, 0.7)"}}});return(0,a.jsx)(i.Z,{theme:l,children:n})}},888096:function(e,t,s){"use strict";s.d(t,{c:function(){return a}});let a=e=>{let t=new FormData(e.target);e.preventDefault();let s={};for(let e of t)s[e[0]]=e[1];return s}},806539:function(e,t,s){"use strict";s.r(t);var a=s(785893),r=s(667294),i=s(577341),n=s(834269),o=s(517586),l=s(944287),h=s(811768),p=s(33916),d=s(779180),c=s(463911),u=s(345774),g=s(249638),m=s(809530),x=s(438837),b=s(541749),f=s(522318),j=s(79895),w=s(439803),C=s(630553),v=s(52663),y=s(882285),Z=s(566083),S=s(29525),k=s(207212),_=s(966856),E=s(416485),T=s(816596),M=s(31125),P=s(273099),B=s(666037),D=s(139621),H=s(752506),I=s(367088),A=s(619719),R=s(634538),L=s(888096),q=s(282),F=s(853676),z=s(903705);class K extends r.Component{static async getInitialProps(e){let{query:t,req:s}=e;try{return s||(0,m.Es)(t),{webviewSignup:t.webviewSignup,themeType:t.themeType}}catch(e){}}async componentDidMount(){await (0,z.lK)()}onCaptcha(e){this.setState({captcha:e,disableBtn:!1})}render(){let{intl:e}=this.props,t={container:{marginTop:16,display:"block"},greenButton:{marginRight:this.props.webviewSignup?0:15,backgroundColor:(0,o.Z)(this.props.theme.palette).button.action.background,color:(0,o.Z)(this.props.theme.palette).button.action.text,width:"100%",height:50}},s=(0,a.jsx)(g.Z,{color:(0,o.Z)(this.props.theme.palette).button.action.text,action:!0}),r=(0,d.vU)({title:{id:"document-title.signup",defaultMessage:"Sign up"},htmlDescription:{id:"description.signup"}});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.Z,{description:e.formatMessage(r.htmlDescription)}),(0,a.jsx)(i.Z,{...this.props,frontType:this.props.frontType,csrfToken:this.props.csrfToken,xs:this.props.xs,sm:this.props.sm,md:this.props.md,lg:this.props.lg,xl:this.props.xl,stateFromCookies:this.props.stateFromCookies,title:e.formatMessage(r.title),hide:this.props.webviewSignup,children:(0,a.jsx)(R.Z,{active:this.props.webviewSignup,type:this.props.themeType,children:(0,a.jsxs)(b.Z,{item:!0,style:{margin:"auto",maxWidth:this.props.webviewSignup?"100%":550,padding:this.props.webviewSignup?0:16},children:[!this.props.webviewSignup&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(f.Z,{component:"h1",display:"block",variant:"h4",children:(0,a.jsx)(d._H,{id:"signup.title",defaultMessage:"Sign up"})}),(0,a.jsx)(f.Z,{display:"block",style:{paddingBottom:8},variant:"caption",color:"textSecondary",children:(0,x.Z)("login.same-credentials-tip",{front_type_url:(0,m.au)(T.frontProps[this.props.frontType].oppositeFront,T.frontProps[this.props.frontType].oppositeUrl,!0)})})]}),(0,a.jsx)(j.Z,{elevation:1,style:{padding:this.props.webviewSignup?0:30,borderRadius:this.props.webviewSignup?0:4,height:this.props.webviewSignup?"100vh":"auto"},children:(0,a.jsxs)("form",{id:"signup",onSubmit:this.submit,method:"POST",children:[(0,a.jsx)(b.Z,{item:!0,xs:12,children:(0,a.jsx)(w.Z,{variant:"outlined",autoFocus:!0,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{name:"username",pattern:"^[a-zA-Z0-9\\-_]+$",minLength:3,maxLength:16,required:!0,form:"signup","aria-label":"Username"},autoComplete:"username",id:"username",name:"username",type:"text",label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d._H,{id:"login.username",defaultMessage:"Username"}),"*"]}),margin:"normal",helperText:(0,a.jsx)(d._H,{id:"login.username-tip",defaultMessage:"3-16 characters. Allowed characters: a-z, A-Z, 0-9, -, _"})})}),(0,a.jsx)(b.Z,{item:!0,xs:12,children:(0,a.jsx)(w.Z,{variant:"outlined",fullWidth:!0,id:"email",name:"email",type:"email",InputLabelProps:{shrink:!0},inputProps:{name:"email",pattern:'^(([^<>()\\\\[\\\\]\\\\.,;:\\s@"]+(\\.[^<>\\(\\)\\[\\]\\\\.,;:\\s@"]+)*)|(".+"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$',form:"signup","aria-label":"Email"},autoComplete:"email",label:(0,a.jsx)(d._H,{id:"signup.email",defaultMessage:"Email (optional)"}),margin:"normal",helperText:(0,x.Z)("signup.email-tip")})}),(0,a.jsx)(b.Z,{item:!0,xs:12,children:(0,a.jsx)(w.Z,{variant:"outlined",fullWidth:!0,id:"password",name:"password",InputLabelProps:{shrink:!0},inputProps:{name:"password",pattern:"^[ -~]+$",minLength:8,maxLength:72,required:!0,form:"signup","aria-label":"Password"},autoComplete:"current-password",label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d._H,{id:"password",defaultMessage:"Password"}),"*"]}),type:"password",margin:"normal",helperText:(0,a.jsx)(d._H,{id:"password-tip",defaultMessage:"8-72 characters."})})}),(0,a.jsx)(b.Z,{item:!0,xs:12,children:(0,a.jsx)(w.Z,{variant:"outlined",fullWidth:!0,id:"confirm_password",type:"password",InputLabelProps:{shrink:!0},inputProps:{name:"confirm_password",pattern:"^[ -~]+$",minLength:8,maxLength:72,required:!0,form:"signup","aria-label":"Confirm password"},autoComplete:"current-password",label:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d._H,{id:"signup.confirm-pass",defaultMessage:"Confirm password"}),"*"]}),margin:"normal"})}),(0,a.jsxs)(b.Z,{item:!0,xs:12,children:[(0,a.jsxs)(q.Z,{size:"small",style:{margin:"8px 0",textTransform:"none",fontWeight:500},color:"primary",onClick:()=>this.setState({showCouponCodeInput:!this.state.showCouponCodeInput}),children:[(0,x.Z)("coupons.signup.show-coupon-input-btn"),this.state.showCouponCodeInput?(0,a.jsx)(M.Z,{}):(0,a.jsx)(P.Z,{})]}),(0,a.jsx)(B.Z,{in:this.state.showCouponCodeInput,children:(0,a.jsx)(D.Z,{isRegistration:!0,sendToParent:(e,t)=>this.setState({couponCode:e,couponCodeError:t})})})]}),(0,a.jsx)(b.Z,{item:!0,xs:12,children:(0,a.jsx)(C.Z,{control:(0,a.jsx)(l.Z,{checked:this.state.agreeTos,onChange:this.handleSwitch("agreeTos"),"aria-label":"Agree with Terms of Service"}),label:(0,a.jsx)(d._H,{id:"signup.agree-to-tos",values:{terms:(0,a.jsx)("a",{href:"/terms",target:"_blank",rel:"noopener",style:{textDecoration:"none",color:this.props.webviewSignup&&"dark"===this.props.themeType?"#8093fb":(0,o.Z)(this.props.theme.palette).link.regular},children:(0,a.jsx)(d._H,{id:"signup.agree-to-tos-terms"})})},defaultMessage:"I have read and agreed to {terms}"})})}),(0,a.jsx)(b.Z,{item:!0,xs:12,style:{marginTop:11},children:this.state.requireCaptcha&&(0,a.jsx)(c.Z,{raisedLabel:!0,preventCacheKey:new Date().getTime(),onReset:()=>this.setState({resetCaptcha:!1}),reset:this.state.resetCaptcha,sendToParent:this.handleCaptcha.bind(this)})}),(0,a.jsx)(b.Z,{item:!0,xs:12,children:(0,a.jsx)("div",{style:t.container,children:(0,a.jsx)(F.Z,{component:"button",disabled:!this.state.agreeTos,form:"signup",type:"submit",variant:"contained",style:t.greenButton,startIcon:this.state.spinner?s:null,"aria-label":"Register buttonk",children:(0,a.jsx)(d._H,{id:"signup.btn",defaultMessage:"Register"})})})}),!this.props.webviewSignup&&(0,a.jsxs)(b.Z,{style:{paddingTop:15,paddingBottom:15},item:!0,xs:12,children:[(0,a.jsx)(f.Z,{display:"block",style:{display:"inline-block"},variant:"caption",children:(0,a.jsx)(d._H,{id:"signup.login",values:{link:(0,m.au)((0,a.jsx)(d._H,{id:"signup.login-link",defaultMessage:"Log in."}),"/login")},defaultMessage:"Already have an account? {link}"})})," ",(0,a.jsx)(f.Z,{display:"block",style:{display:"inline-block"},variant:"caption",children:(0,a.jsx)(d._H,{id:"login.reset",values:{link:(0,A.a$)("/requestReset",(0,a.jsx)(d._H,{id:"login.reset-link",defaultMessage:"Reset it here."}))},defaultMessage:"Forgot your password? {link}"})})]})]})}),(0,a.jsxs)(v.Z,{open:!!this.state.tosErr,transition:y.Z,onClose:this.handleRequestDialogClose,children:[(0,a.jsx)(Z.Z,{children:(0,a.jsx)(d._H,{id:"signup.tos-dialog-title",defaultMessage:"Terms of service"})}),(0,a.jsx)(S.Z,{children:(0,a.jsx)(k.Z,{children:(0,a.jsx)(d._H,{id:"signup.tos-dialog-text",values:{terms:(0,a.jsx)("a",{href:"/terms",style:{textDecoration:"none",color:(0,o.Z)(this.props.theme.palette).link.regular},children:(0,a.jsx)(d._H,{id:"signup.tos-dialog-text-terms"})})},defaultMessage:"In order to register, please read and agree with {terms}"})})}),(0,a.jsxs)(_.Z,{children:[(0,a.jsx)(q.Z,{onClick:this.dialogTosDisgree,color:"primary",children:(0,a.jsx)(d._H,{id:"signup.tos-dialog-text-disagree",defaultMessage:"Disagree"})}),(0,a.jsx)(q.Z,{onClick:this.dialogTosAgree,color:"primary",children:(0,a.jsx)(d._H,{id:"signup.tos-dialog-text-agree",defaultMessage:"Agree"})})]})]}),(0,a.jsxs)(v.Z,{open:!!this.state.submitErr,transition:y.Z,onClose:this.submitErrDialogClose,children:[(0,a.jsx)(Z.Z,{children:(0,a.jsx)(d._H,{id:"signup.error-dialog-title",defaultMessage:"Form error"})}),(0,a.jsx)(S.Z,{children:(0,a.jsx)(k.Z,{children:(0,a.jsx)(d._H,{id:"signup.error-dialog-text",defaultMessage:"Please enter valid information."})})}),(0,a.jsx)(_.Z,{children:(0,a.jsx)(q.Z,{onClick:this.submitErrDialogClose,color:"primary",children:(0,a.jsx)(d._H,{id:"post-ad.error.dialog-back-btn",defaultMessage:"Back"})})})]}),(0,a.jsxs)(v.Z,{open:!!this.state.error,transition:y.Z,onClose:()=>this.setState({error:!1}),children:[(0,a.jsx)(Z.Z,{children:(0,a.jsx)(d._H,{id:"signup.error-2-dialog-title",defaultMessage:"Registration error"})}),(0,a.jsx)(S.Z,{children:(0,a.jsx)(k.Z,{children:this.state.errorMessage})}),(0,a.jsx)(_.Z,{children:(0,a.jsx)(q.Z,{onClick:()=>this.setState({error:!1}),color:"primary",children:(0,a.jsx)(d._H,{id:"post-ad.error.dialog-back-btn",defaultMessage:"Back"})})})]})]})})})]})}constructor(e,t){super(e,t),this.validate=(e,t)=>e.match(t),this.handleUsernameInput=e=>{e.target.value?this.validate(e.target.value,/^[a-zA-Z0-9\-_]+$/)&&e.target.value.length<=16&&e.target.value.length>=3?this.setState({username:e.target.value,usernameError:!1},()=>this.handleButtonDisable()):this.setState({username:e.target.value,usernameError:!0},()=>this.handleButtonDisable()):this.setState({username:"",usernameError:!1},()=>this.handleButtonDisable())},this.handleEmailInput=e=>{e.target.value?this.validate(e.target.value,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)&&e.target.value.length<255?this.setState({email:e.target.value,emailError:!1},()=>this.handleButtonDisable()):this.setState({email:e.target.value,emailError:!0},()=>this.handleButtonDisable()):this.setState({email:"",emailError:!1},()=>this.handleButtonDisable()),""===e.target.value&&this.setState({email:e.target.value,emailError:!1},()=>this.handleButtonDisable())},this.handlePasswordInput=e=>{e.target.value?this.validate(e.target.value,/^[ -~]+$/)&&e.target.value.length<=72&&e.target.value.length>=8?this.setState({password:e.target.value,passwordError:!1},()=>this.handleButtonDisable()):this.setState({password:e.target.value,passwordError:!0},()=>this.handleButtonDisable()):this.setState({password:"",passwordError:!1},()=>this.handleButtonDisable()),e.target.value!==this.state.repeatPassword?this.setState({repeatError:!0},()=>this.handleButtonDisable()):e.target.value===this.state.repeatPassword&&this.setState({repeatError:!1},()=>this.handleButtonDisable())},this.handlePasswordRepeat=e=>{e.target.value!==this.state.password?this.setState({repeatPassword:e.target.value,repeatError:!0},()=>this.handleButtonDisable()):(e.target.value===this.state.password||this.state.repeatPassword===this.state.password)&&this.setState({repeatPassword:e.target.value,repeatError:!1},()=>this.handleButtonDisable())},this.handleSwitch=e=>(t,s)=>{this.setState({[e]:s},()=>this.handleButtonDisable())},this.handleRequestDialogClose=()=>{this.setState({tosErr:!1})},this.dialogTosAgree=()=>{this.setState({tosErr:!1,agreeTos:!0},()=>this.handleButtonDisable())},this.dialogTosDisgree=()=>{this.setState({tosErr:!1,agreeTos:!1},()=>this.handleButtonDisable())},this.submitErrDialogClose=()=>{this.setState({submitErr:!1})},this.digestErrors=e=>{switch(e){case"47":return(0,a.jsx)(d._H,{id:"error.signup.47",defaultMessage:"User with that username already exists"});case"48":return(0,a.jsx)(d._H,{id:"error.signup.48",defaultMessage:"User with that email already exists"});case"219":return(0,a.jsx)(d._H,{id:"error.signup.219"});case"175":return(0,x.Z)("coupons.error.179");case"176":return(0,x.Z)("coupons.error.180");case"177":return(0,x.Z)("coupons.error.183");case"MAC_VERIFICATION_ERROR":return(0,x.Z)("nojs.error.server");default:return(0,a.jsx)(d._H,{id:"settings.generic-error",defaultMessage:"Something went wrong! Please try again"})}},this.handleSubmit=async()=>{if(""===this.state.username||""===this.state.password||this.state.repeatError||this.state.emailError&&""!==this.state.email||this.state.usernameError||this.state.passwordError)this.setState({submitErr:!0});else if(this.state.agreeTos){this.setState({disableBtn:!0,spinner:!0});try{let{password:e,username:t}=this.state,s={captcha:this.state.captcha,username:t,password:e,referralCode:h.ZP.load("rc")?h.ZP.load("rc"):null,frontType:this.props.frontType,couponCode:!this.state.couponCodeError&&this.state.couponCode&&this.state.showCouponCodeInput?this.state.couponCode:null};if(this.state.email&&(s.email=this.state.email),await (0,H.Z)({url:n.y1(),data:s,headers:this.props.webviewSignup?{"x-auth-type":"mobile-app"}:{}}),this.props.webviewSignup)return;(0,A.LS)("/signup/success")}catch(e){this.setState({spinner:!1}),e instanceof I.Z&&"MAC_VERIFICATION_ERROR"===e.code?(this.setState({resetCaptcha:!!this.state.requireCaptcha,disableBtn:!1}),this.setState({error:!0,errorMessage:this.digestErrors(e.code)})):e.data&&e.data.message&&"30"===e.data.message?(this.state.requireCaptcha&&this.setState({error:!0,errorMessage:(0,a.jsx)(d._H,{id:"error.captcha",defaultMessage:"CAPTCHA failed, please try again"})}),this.setState({resetCaptcha:!!this.state.requireCaptcha,requireCaptcha:!0})):(this.setState({resetCaptcha:!!this.state.requireCaptcha,disableBtn:!0}),this.setState({error:!0,errorMessage:this.digestErrors(e.message)}))}}else this.setState({tosErr:!0})},this.handleCaptcha=e=>{this.setState({captcha:e},()=>this.handleButtonDisable())},this.handleButtonDisable=()=>{""===this.state.username||""===this.state.password||this.state.repeatError||this.state.emailError&&""!==this.state.email||this.state.usernameError||this.state.passwordError||!this.state.agreeTos||!this.state.captcha&&this.state.requireCaptcha?this.setState({disableBtn:!0}):this.setState({disableBtn:!1})},this.submit=async e=>{let{username:t,password:s,confirm_password:r,email:i}=(0,L.c)(e);try{if(s!==r)throw Error("PASSWORD_MISMATCH");let e={captcha:this.state.captcha,username:t,password:s,referralCode:h.ZP.load("rc")?h.ZP.load("rc"):null,frontType:this.props.frontType,couponCode:!this.state.couponCodeError&&this.state.couponCode&&this.state.showCouponCodeInput?this.state.couponCode:null};if(i&&(e.email=i),await (0,H.Z)({url:n.y1(),data:e,headers:this.props.webviewSignup?{"x-auth-type":"mobile-app"}:{}}),this.props.webviewSignup)return;(0,A.LS)("/signup/success")}catch(e){this.setState({spinner:!1}),(null==e?void 0:e.message)==="PASSWORD_MISMATCH"?this.setState({error:!0,errorMessage:"Please make sure the passwords match"}):e.data&&e.data.message&&"30"===e.data.message?(this.state.requireCaptcha&&this.setState({error:!0,errorMessage:(0,a.jsx)(d._H,{id:"error.captcha",defaultMessage:"CAPTCHA failed, please try again"})}),this.setState({resetCaptcha:!!this.state.requireCaptcha,requireCaptcha:!0})):(this.setState({resetCaptcha:!!this.state.requireCaptcha,disableBtn:!0}),this.setState({error:!0,errorMessage:this.digestErrors(e.message)}))}},this.handleButtonDisable=this.handleButtonDisable.bind(this),this.state={username:"",email:"",password:"",captcha:"",repeatPassword:"",agreeTos:!1,usernameError:!1,repeatError:!1,emailError:!1,passwordError:!1,tosErr:!1,submitErr:!1,success:!1,error:!1,errorMessage:null,spinner:!1,disableBtn:!0}}}t.default=(0,p.Z)((0,E.Z)(K))}},function(e){e.O(0,[784446,970375,704024,322075,879681,879474,773663,939519,664173,840755,420310,552466,905917,85370,611251,138396,38799,439803,95864,46516,620609,946917,178404,577341,49774,692888,740179],function(){return e(e.s=798588)}),_N_E=e.O()}]);